.. _examples:

Examples
========

Example Models
--------------

The Determined distribution contains several example experiments in the
``examples/`` subdirectory. Each experiment consists of a single
model definition and one or more experiment configurations.

.. list-table::
  :header-rows: 1

  * - Framework
    - Dataset
  * - PyTorch
    - :download:`MNIST </examples/mnist_pytorch.tgz>`
  * - PyTorch
    - :download:`CIFAR-10 CNN </examples/cifar10_cnn_pytorch.tgz>`
  * - TensorFlow (Estimator API)
    - :download:`MNIST </examples/mnist_estimator.tgz>`
  * - TensorFlow (tf.keras)
    - :download:`CIFAR-10 CNN </examples/cifar10_cnn_tf_keras.tgz>`

TensorBoard Integration
-----------------------

This example shows how to use Determined with `TensorBoard
<https://www.tensorflow.org/programmers_guide/summaries_and_tensorboard>`__ to
visualize training and/or validation metrics.

To configure TensorBoard with Determined, follow these steps:

1. Set up a directory on a shared file system for TensorBoard event
   files, e.g. ``/mnt/tensorboard``. All agents must be able to write to
   this directory.
2. Add an entry to the experiment config to ensure that the shared
   directory is mounted into each trial container. In this example, we
   use ``/tensorboard`` as the container path:

.. code:: yaml

   bind_mounts:
     - host_path: /mnt/tensorboard
       container_path: /tensorboard

3. Implement the ``callbacks()`` interface in your model definition.
   Use your ``container_path`` (``/tensorboard`` in this example) as the
   ``log_directory`` argument.

.. code:: python

   from determined.estimator import TFEventWriter

   class MNISTTrial(EstimatorTrial):
      ...
      def callbacks(self, hparams):
          return TFEventWriter("/tensorboard")
      ...

4. Start TensorBoard using the ``host_path`` from step 2 to view the
   experiment metrics as the experiment is running or after it has
   ended.

.. code:: bash

   tensorboard --logdir=/mnt/tensorboard
